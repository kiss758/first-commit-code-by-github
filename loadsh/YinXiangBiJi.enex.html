<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602988 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="559"/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">const</span> arr = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Array</span>(); <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 或 const arr = [];</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">[]是一个引用类型，也就是一个object类型</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">typeof</span> arr; <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// &quot;object&quot;</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">既然是object，用于判断条件时就会被转化为true</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span>(arr) <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">console</span>.log(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;it's true&quot;</span>); <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// it's true</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">但是，如果将arr与布尔值比较：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    arr == <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">false</span>; <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// true </span>
    arr == <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>; <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// false</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">可是，如果把arr转化为Boolean，的确是true</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Boolean</span>(arr); <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// true</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">那arr与布尔值比较时，到底发生了什么？原来，任意值与布尔值比较，都会将两边的值转化为Number。如arr与false比较，false转化为0，而arr为空数组，也转化为0：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Number</span>(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">false</span>) <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 0 </span>
    <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Number</span>(arr) <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 0</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">所以，当空数组作为判断条件时，相当于true。当空数组与布尔值直接比较时，相当于false。也就出现了以下令人绕圈的现象：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    [] == ![]; <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// true</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">因为![]为false，[]与 <strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">![]</strong> 比较相当于[]与<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">false</strong>进行比较如何避免数组与布尔值比较时出现的坑呢？可以先把数组转化为布尔值：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">    <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Boolean</span>(arr) == <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">true</span>; <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// true</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Array</span>() == []; <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//false</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">就和new Array() == new Array()一样。是不同的两个对象。</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">  <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Array</span>(<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>) == <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">false</span>;<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// true，虽然数组的长度为1，但还是一个空数组Number[new Array()]为0</span>
  [<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">undefined</span>] == <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">false</span>;<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// true,虽然[undefined].length为1，Number([undefined])为0;</span>
</code></pre>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">所以开发中尽量少用==,多用====</strong></li>
</ul>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%60%60%60javascript%0A%20%20%20%20const%20arr%20%3D%20new%20Array()%3B%20%2F%2F%20%E6%88%96%20const%20arr%20%3D%20%5B%5D%3B%0A%60%60%60%0A%5B%5D%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AAobject%E7%B1%BB%E5%9E%8B%0A%60%60%60javascript%0A%20%20%20%20typeof%20arr%3B%20%2F%2F%20%22object%22%0A%60%60%60%0A%E6%97%A2%E7%84%B6%E6%98%AFobject%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6%E6%97%B6%E5%B0%B1%E4%BC%9A%E8%A2%AB%E8%BD%AC%E5%8C%96%E4%B8%BAtrue%0A%60%60%60javascript%0A%20%20%20%20if(arr)%20console.log(%22it's%20true%22)%3B%20%2F%2F%20it's%20true%0A%60%60%60%0A%E4%BD%86%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%B0%86arr%E4%B8%8E%E5%B8%83%E5%B0%94%E5%80%BC%E6%AF%94%E8%BE%83%EF%BC%9A%0A%60%60%60javascript%0A%20%20%20%20arr%20%3D%3D%20false%3B%20%2F%2F%20true%20%0A%20%20%20%20arr%20%3D%3D%20true%3B%20%2F%2F%20false%0A%60%60%60%0A%E5%8F%AF%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%8A%8Aarr%E8%BD%AC%E5%8C%96%E4%B8%BABoolean%EF%BC%8C%E7%9A%84%E7%A1%AE%E6%98%AFtrue%0A%60%60%60javascript%0A%20%20%20%20Boolean(arr)%3B%20%2F%2F%20true%0A%60%60%60%0A%E9%82%A3arr%E4%B8%8E%E5%B8%83%E5%B0%94%E5%80%BC%E6%AF%94%E8%BE%83%E6%97%B6%EF%BC%8C%E5%88%B0%E5%BA%95%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F%E5%8E%9F%E6%9D%A5%EF%BC%8C%E4%BB%BB%E6%84%8F%E5%80%BC%E4%B8%8E%E5%B8%83%E5%B0%94%E5%80%BC%E6%AF%94%E8%BE%83%EF%BC%8C%E9%83%BD%E4%BC%9A%E5%B0%86%E4%B8%A4%E8%BE%B9%E7%9A%84%E5%80%BC%E8%BD%AC%E5%8C%96%E4%B8%BANumber%E3%80%82%E5%A6%82arr%E4%B8%8Efalse%E6%AF%94%E8%BE%83%EF%BC%8Cfalse%E8%BD%AC%E5%8C%96%E4%B8%BA0%EF%BC%8C%E8%80%8Carr%E4%B8%BA%E7%A9%BA%E6%95%B0%E7%BB%84%EF%BC%8C%E4%B9%9F%E8%BD%AC%E5%8C%96%E4%B8%BA0%EF%BC%9A%0A%60%60%60javascript%0A%20%20%20%20Number(false)%20%2F%2F%200%20%0A%20%20%20%20Number(arr)%20%2F%2F%200%0A%60%60%60%0A%E6%89%80%E4%BB%A5%EF%BC%8C%E5%BD%93%E7%A9%BA%E6%95%B0%E7%BB%84%E4%BD%9C%E4%B8%BA%E5%88%A4%E6%96%AD%E6%9D%A1%E4%BB%B6%E6%97%B6%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8Etrue%E3%80%82%E5%BD%93%E7%A9%BA%E6%95%B0%E7%BB%84%E4%B8%8E%E5%B8%83%E5%B0%94%E5%80%BC%E7%9B%B4%E6%8E%A5%E6%AF%94%E8%BE%83%E6%97%B6%EF%BC%8C%E7%9B%B8%E5%BD%93%E4%BA%8Efalse%E3%80%82%E4%B9%9F%E5%B0%B1%E5%87%BA%E7%8E%B0%E4%BA%86%E4%BB%A5%E4%B8%8B%E4%BB%A4%E4%BA%BA%E7%BB%95%E5%9C%88%E7%9A%84%E7%8E%B0%E8%B1%A1%EF%BC%9A%0A%60%60%60javascript%0A%20%20%20%20%5B%5D%20%3D%3D%20!%5B%5D%3B%20%2F%2F%20true%0A%60%60%60%0A%E5%9B%A0%E4%B8%BA!%5B%5D%E4%B8%BAfalse%EF%BC%8C%5B%5D%E4%B8%8E%20**!%5B%5D**%20%E6%AF%94%E8%BE%83%E7%9B%B8%E5%BD%93%E4%BA%8E%5B%5D%E4%B8%8E**false**%E8%BF%9B%E8%A1%8C%E6%AF%94%E8%BE%83%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E6%95%B0%E7%BB%84%E4%B8%8E%E5%B8%83%E5%B0%94%E5%80%BC%E6%AF%94%E8%BE%83%E6%97%B6%E5%87%BA%E7%8E%B0%E7%9A%84%E5%9D%91%E5%91%A2%EF%BC%9F%E5%8F%AF%E4%BB%A5%E5%85%88%E6%8A%8A%E6%95%B0%E7%BB%84%E8%BD%AC%E5%8C%96%E4%B8%BA%E5%B8%83%E5%B0%94%E5%80%BC%EF%BC%9A%0A%60%60%60javascript%0A%20%20%20%20Boolean(arr)%20%3D%3D%20true%3B%20%2F%2F%20true%0A%20%20%20%20new%20Array()%20%3D%3D%20%5B%5D%3B%20%2F%2Ffalse%0A%60%60%60%0A%E5%B0%B1%E5%92%8Cnew%20Array()%20%3D%3D%20new%20Array()%E4%B8%80%E6%A0%B7%E3%80%82%E6%98%AF%E4%B8%8D%E5%90%8C%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%AF%B9%E8%B1%A1%E3%80%82%0A%60%60%60javascript%0A%20%20new%20Array(1)%20%3D%3D%20false%3B%2F%2F%20true%EF%BC%8C%E8%99%BD%E7%84%B6%E6%95%B0%E7%BB%84%E7%9A%84%E9%95%BF%E5%BA%A6%E4%B8%BA1%EF%BC%8C%E4%BD%86%E8%BF%98%E6%98%AF%E4%B8%80%E4%B8%AA%E7%A9%BA%E6%95%B0%E7%BB%84Number%5Bnew%20Array()%5D%E4%B8%BA0%0A%20%20%5Bundefined%5D%20%3D%3D%20false%3B%2F%2F%20true%2C%E8%99%BD%E7%84%B6%5Bundefined%5D.length%E4%B8%BA1%EF%BC%8CNumber(%5Bundefined%5D)%E4%B8%BA0%3B%0A%60%60%60%0A-%20**%E6%89%80%E4%BB%A5%E5%BC%80%E5%8F%91%E4%B8%AD%E5%B0%BD%E9%87%8F%E5%B0%91%E7%94%A8%3D%3D%2C%E5%A4%9A%E7%94%A8%3D%3D%3D%3D**</center></span>
</div></body></html> 